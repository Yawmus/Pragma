package com.peter.rogue.entities;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.maps.MapProperties;
import com.peter.rogue.Global;

public class Monster extends NPC{

	private MapProperties keys = new MapProperties();
	
	public Monster(String filename, String type) {
		super(filename, type);
		hostile = true;
	}

	public void draw(SpriteBatch spriteBatch){
		super.draw(spriteBatch);
		update(Gdx.graphics.getDeltaTime());
	}
	
	@Override
	public void checkCollision(){
		keys = collisionLayer.getCell((int) (getX() / tileWidth), (int) (getY() / tileHeight)).getTile().getProperties();
		
		if("1".equals(keys.get("blocked"))){
			setX(oldX);
			setY(oldY);
		}
		
		if(getMapID(getY(), getX()) != "null" && getMapID(getY(), getX()) != getID()){
			Global.inbox.sendMail(getMapID(getY(), getX()), getType());
			setX(oldX);
			setY(oldY);
		}
		
		setMap((int)oldY, (int)oldX, nullEntry);
		setMap((int)getY(), (int)getX(), this.entry);
		
		oldX = getX();
		oldY = getY();
	}
	
	public void setMessage(String type){
		if(type != "null")
			message = "*Gurgle*";
	}
}
