package com.peter.map;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.Texture;
import com.peter.rogue.Global;

public class Tile{
	/*blocked, stairway, door, direction, canSee, animated
	*/
	private Texture texture;
	private String name;
	private boolean[] properties;
	private float tick = Global.rand(5, 0);
	public Color tint;

	public static Tile BLANK = new Tile("blank.png", "", new boolean[]{true, false, false, false, false, false});
	public static Tile GROUND = new Tile("period.png", "", new boolean[]{false, false, false, false, true, false});
	public static Tile WALL = new Tile("hash.png", "", new boolean[]{true, false, false, false, false, false});
	public static Tile DOOR = new Tile("plus.png", "Door", new boolean[]{false, false, true, false, false, false});
	public static Tile WATER = new Tile("tilda.png", "", new boolean[]{true, false, false, false, true, true});
	public static Tile DOWN = new Tile("greater.png", "Downstairs", new boolean[]{false, true, false, false, true, false});
	public static Tile UP = new Tile("less.png", "Upstairs", new boolean[]{false, true, false, true, true, false});
	public static Tile GRASS = new Tile("comma.png", "", new boolean[]{false, false, false, false, true, false});
	
	public Tile(String filename, String name, boolean[] properties){
		texture = new Texture(Gdx.files.internal("maps/" + filename));
		tint = new Color();
		
		this.name = name;
		this.properties = properties;
	}
	
	public Tile(Tile tile){
		this.texture = tile.texture;
		this.name = tile.name;
		this.properties = tile.properties;
	}
	
	public void update(float delta){
		if(properties[5]){
			tick += delta;
			if(tick > 5){
				float rand = Global.rand(20, 0);
				tint = new Color(0, (float) rand/100, (float) (70 + rand)/100, 1);
				tick = 0;
			}
		}
	}
	
	public String getName(){
		return name;
	}

	public Texture getTexture() {
		return texture;
	}

	/*public Texture getVisiedTexture() {
		return visitedTexture;
	}*/
	
	public void setTexture(Texture texture) {
		this.texture = texture;
	}
	
	public boolean isBlocked(){
		return properties[0];
	}
	public boolean hasStairs() {
		return properties[1];
	}
	public boolean isDoor(){
		return properties[2];
	}
	public boolean direction() {
		return properties[3];
	}

	public boolean canSee() {
		return properties[4];
	}

	public boolean isAnimated() {
		return properties[5];
	}
}
