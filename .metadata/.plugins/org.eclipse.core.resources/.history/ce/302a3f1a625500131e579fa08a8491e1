package com.peter.server.entities;


import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.peter.server.Global;
import com.peter.server.PragmaServer;

public class Worm extends Monster{

	private float multiplyDelay;
	private boolean fertile;
	
	public Worm(String filename) {
		super(filename, "Worm");
		
		stats.setLevel(1);
		stats.setHitpoints(20);
		stats.setDexterity(5);
		stats.setStrength(2);
		stats.setExperience(0);

		message = "*Gurgle*";

		list.addType("Citizen");
		list.addType("Shopkeep");
		list.addType("Player");
		
		multiplyDelay = Global.rand(6, 0);
		
		if(Global.rand(3, 0) == 0)
			fertile = true;
		else
			fertile = false;
	}
	
	public void update(float delta){
		super.update(delta);
		
		if(fertile){
			multiplyDelay += delta;
			
			if(multiplyDelay >= 35){
				multiplyDelay = 0;
				multiply();
			}
		}
	}
	
	public void multiply(){
		PragmaServer.map.npcs.add(new Worm("tilda.png"));
		PragmaServer.map.npcs.get(PragmaServer.map.npcs.size()-1).setPosition((int)(this.getX()/32), (int)(this.getY()/32));
		if(attacker != null)
			PragmaServer.map.npcs.get(PragmaServer.map.npcs.size()-1).attacker = attacker;
	}
}

